<!DOCTYPE html>
<html lang="en" dir="ltr" xmlns="http://www.w3.org/1999/html">
<head>
  <meta charset="UTF-8">
  <title> BackOffice FCT NOVA</title>
  <link rel="stylesheet" href="styleMainPage.css">
  <link rel="stylesheet" href="stickyNote.css">
  <link rel="stylesheet" href="clock.css">
  <script src="https://www.gstatic.com/firebasejs/8.7.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.7.0/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.7.0/firebase-storage.js"></script>
  <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body onload="verifyLogin(); loadLoggedUser(); registeredUsers(); repToSolve(); newsToSolve(); eventsToSolve(); numOfLoggedUsers();">
<div class="cardResize">
  <div class="card" style="width: 250px;">
    <img alt="User Photo" id="profilePic" style="width:100%">
    <h1 id="usercard"></h1>
    <p class="title" id="usernameMail"></p>
    <p class="title" id="departmentTitle"></p>
    <p class="title" id="departmentJobTitle"></p>
    <p class="title" id="role"></p>
    <p class="title2">FCT NOVA</p>
  </div>
</div>
<button onclick="topFunction()" id="myBtn" style="bottom: 90px;">Topo<i class='bx bx-up-arrow-alt'></i></button>
<div id="clock"></div>
<div id="data"></div>
<div class="sidebar">
  <div class="logo-details">
    <i> <img src="../img/logo.png" alt="UNIVERSE logo" width="45" height="45"> </i>
    <span class="logo_name">UniVerse</span>
  </div>
  <ul class="nav-links">
    <li>
      <button onclick="window.location.href = '/backoffice/mainPage.html'">
        <a href="#" class="active">
          <i class='bx bx-grid-alt' ></i>
          <span class="links_name">Home</span>
        </a>
      </button>
    </li>
    <li>
      <button onclick="window.location.href = '/backoffice/mainPageHojeFCT.html'">
        <a href="#hojeFCT">
          <i class='bx bx-info-circle'></i>
          <span class="links_name">Hoje na FCT</span>
        </a>
      </button>
    </li>
    <li>
      <button onclick="window.location.href = '/backoffice/mainPageNews.html'">
        <a href="#news">
          <i class='bx bx-message'></i>
          <span class="links_name">Notícias</span>
        </a>
      </button>
    </li>
    <li>
      <button onclick="window.location.href = '/backoffice/mainPageEvents.html'">
        <a href="#events">
          <i class='bx bx-list-ul' ></i>
          <span class="links_name">Eventos</span>
        </a>
      </button>
    </li>
    <li>
      <button onclick="window.location.href = '/backoffice/mainPageHelpQuestions.html'">
        <a href="#faq">
          <i class='bx bx-question-mark'></i>
          <span class="links_name">FAQ</span>
        </a>
      </button>
    </li>
    <li>
      <button onclick="window.location.href = '/backoffice/mainPageUsers.html'">
        <a href="#users">
          <i class='bx bx-user' ></i>
          <span class="links_name">Users</span>
        </a>
      </button>
    </li>
    <li>
      <button onclick="window.location.href = '/backoffice/mainPageNucleos.html'">
        <a href="#stats">
          <i class='bx bx-pie-chart-alt-2' ></i>
          <span class="links_name">Núcleos</span>
        </a>
      </button>
    </li>
    <li>
      <button onclick="window.location.href = '/backoffice/mainPageReports.html'">
        <a href="#reposts">
          <i class='bx bx-book-alt' ></i>
          <span class="links_name">Reports</span>
        </a>
      </button>
    </li>
    <li>
      <button onclick="window.location.href = '/backoffice/mainPageFeedback.html'">
        <a href="#feedback">
          <i class='bx bx-happy-alt'></i>
          <span class="links_name">FeedBack</span>
        </a>
      </button>
    </li>
    <li>
      <button onclick="window.location.href = '/backoffice/mainPageDepartamentos.html'">
        <a href="#dpt">
          <i class='bx bx-buildings' ></i>
          <span class="links_name">Departamentos</span>
        </a>
      </button>
    </li>
    <li class="log_out">
      <button onclick="openPopup()">
        <a href="#logout">
          <i class='bx bx-log-out'></i>
          <span class="links_name">Log out</span>
        </a>
      </button>
    </li>
  </ul>
</div>
<section class="home-section">
  <nav>
    <div class="sidebar-button">
      <i class='bx bx-menu sidebarBtn'></i>
      <span class="home">Home</span>
    </div>
    <h1> Back Office da FCT NOVA</h1>
    <div class="profile-details" style="margin-right:14px" id="auxLogged">
      <img id="miniProfilePic" alt="">
      <span class="admin_name" id="name"></span>
    </div>
  </nav>

  <div class="home-content">
    <div class="form" style="width: 400px; margin-left: 5%; text-align: center; display:inline-block">
      <div class="title" style="text-align: center">Logins efetuados</div>
      <div id="usersLoggedIn" style="color: #eee; text-align: center; font-size: 60px; display: inline-block">0</div>
      <div style="color: #0f0; text-align: center; font-size: 40px; display: inline-block">&nbsp;<i class='bx bx-user'></i></div>
    </div>

    <div class="form" style="width: 400px; margin-left: 5%; text-align: center; display:inline-block">
      <div class="title" style="text-align: center">Users Registados</div>
      <div id="registered" style="color: #eee; text-align: center; font-size: 60px; display: inline-block">0</div>
      <div style="color: #eee; text-align: center; font-size: 40px; display: inline-block">&nbsp;<i class='bx bx-user'></i></div>
    </div>
    <br><br>

    <div class="form" style="width: 400px; margin-left: 5%; text-align: center; display:inline-block">
      <div class="title" style="text-align: center">Reports por Resolver</div>
      <div id="unresolvedRep" style="color: #eee; text-align: center; font-size: 60px; display: inline-block">0</div>
      <div style="color: #d00; text-align: center; font-size: 40px; display: inline-block;">&nbsp;<i class='bx bxs-comment-error'></i></div>
    </div>
    <div class="form" style="width: 400px; margin-left: 5%; text-align: center; display:inline-block">
      <div class="title" style="text-align: center">Notícias por Validar</div>
      <div id="unresolvedNews" style="color: #eee; text-align: center; font-size: 60px; display: inline-block">0</div>
      <div style="color: #d00; text-align: center; font-size: 40px; display: inline-block;">&nbsp;<i class='bx bx-news'></i></div>
    </div>
    <br><br>
    <div class="form" style="width: 400px; margin-left: 5%; text-align: center;">
      <div class="title" style="text-align: center">Eventos por Validar</div>
      <div id="unresolvedEvents" style="color: #eee; text-align: center; font-size: 60px; display: inline-block">0</div>
      <div style="color: #d00; text-align: center; font-size: 40px; display: inline-block;">&nbsp;<i class='bx bx-calendar-event'></i></div>
    </div>
  </div>
  <div class="popup" id="popup">
    <h3>Está prestes a fazer logout</h3>
    <p>Tem a certeza?</p>
    <button type="button" onclick="logout()">Sim</button>
    <button type="button" onclick="closePopup()">Não</button>
  </div>
</section>

<script src="/js/functions.js"></script>
<script src="/js/functions2.js"></script>
<script>
      let popup = document.getElementById("popup");

      function openPopup(){
        popup.classList.add("open-popup");
      }

      function closePopup(){
        popup.classList.remove("open-popup");
      }

      let sidebar = document.querySelector(".sidebar");
      let sidebarBtn = document.querySelector(".sidebarBtn");
      sidebarBtn.onclick = function() {
      sidebar.classList.toggle("active");
      if(sidebar.classList.contains("active")){
        sidebarBtn.classList.replace("bx-menu" ,"bx-menu-alt-right");
      }else
        sidebarBtn.classList.replace("bx-menu-alt-right", "bx-menu");
      }

      let mybutton = document.getElementById("myBtn");
      window.onscroll = function() {scrollFunction()};

      function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            mybutton.style.display = "block";
        } else {
            mybutton.style.display = "none";
        }
      }

      function topFunction() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
      }

    setInterval(showTime, 1000);
        function showTime() {
        	let time = new Date();
        	let hour = time.getHours();
        	let min = time.getMinutes();
        	let sec = time.getSeconds();

        	min = min < 10 ? "0" + min : min;
        	sec = sec < 10 ? "0" + sec : sec;

        	hAux = hour < 10 ? "0" : 0;

        	let currentTime = hAux + hour + ":"
        		+ min + ":" + sec;

        	document.getElementById("clock")
        		.innerHTML = currentTime;
        }

        showTime();

        const date = new Date();

        const options = {
          weekday: 'long',
          year: 'numeric',
          month: 'long',
          day: 'numeric',
        };

        document.getElementById("data").innerHTML = date.toLocaleString('pt-PT', options);
</script>

</body>
</html>