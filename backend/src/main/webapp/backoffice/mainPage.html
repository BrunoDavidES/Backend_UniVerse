<!DOCTYPE html>
<html lang="en" dir="ltr" xmlns="http://www.w3.org/1999/html">
<head>
  <meta charset="UTF-8">
  <title> BackOffice FCT NOVA</title>
  <link rel="stylesheet" href="styleMainPage.css">
  <link rel="stylesheet" href="stickyNote.css">
  <link rel="stylesheet" href="clock.css">
  <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body onload="loadLoggedUser()">
<div class="cardResize">
  <div class="card" style="width: 250px;">
    <img src="../img/logo.png" alt="User Photo" style="width:100%">
    <h1 id="usercard"></h1>
    <p class="title" id="role">Roles do User</p>
    <p class="title" id="usernameMail">@fct.unl.pt</p>
    <p class="title" id="jobs"></p>
    <p class="title2">FCT NOVA</p>
  </div>
</div>
<button onclick="topFunction()" id="myBtn"><i class='bx bx-up-arrow-alt'></i></button>
<div id="clock"></div>
<div id="data"></div>
<div class="sidebar">
  <div class="logo-details">
    <i> <img src="../img/logo.png" alt="UNIVERSE logo" width="45" height="45"> </i>
    <span class="logo_name">UniVerse</span>
  </div>
  <ul class="nav-links">
    <li>
      <button onclick="window.location.href = '/backoffice/mainPage.html'">
      <a href="#" class="active">
        <i class='bx bx-grid-alt' ></i>
        <span class="links_name">Home</span>
      </a>
      </button>
    </li>
    <li>
      <button onclick="window.location.href = '/backoffice/mainPageNews.html'">
      <a href="#news">
        <i class='bx bx-message'></i>
        <span class="links_name">Noticias</span>
      </a>
      </button>
    </li>
    <li>
      <button onclick="window.location.href = '/backoffice/mainPageEvents.html'">
      <a href="#events">
        <i class='bx bx-list-ul' ></i>
        <span class="links_name">Eventos</span>
      </a>
      </button>
    </li>
    <li>
      <button onclick="window.location.href = '/backoffice/mainPageUsers.html'">
      <a href="#users">
        <i class='bx bx-user' ></i>
        <span class="links_name">Users</span>
      </a>
      </button>
    </li>
    <li>
      <button onclick="window.location.href = '/backoffice/mainPageNucleos.html'">
        <a href="#stats">
          <i class='bx bx-pie-chart-alt-2' ></i>
          <span class="links_name">Nucleos</span>
        </a>
      </button>
    </li>
    <li>
      <button onclick="window.location.href = '/backoffice/mainPageReports.html'">
      <a href="#reposts">
        <i class='bx bx-book-alt' ></i>
        <span class="links_name">Reports</span>
      </a>
      </button>
    </li>
    <li>
      <button onclick="window.location.href = '/backoffice/mainPageDepartamentos.html'">
        <a href="#dpt">
          <i class='bx bx-buildings' ></i>
          <span class="links_name">Departamentos</span>
        </a>
      </button>
    </li>
    <li>
      <button onclick="window.location.href = '/backoffice/mainPageSettings.html'">
      <a href="#settings">
        <i class='bx bx-cog' ></i>
        <span class="links_name">Definições</span>
      </a>
      </button>
    </li>
    <li class="log_out">
      <button onclick="openPopup()">
      <a href="#logout">
        <i class='bx bx-log-out'></i>
        <span class="links_name">Log out</span>
      </a>
      </button>
    </li>
  </ul>
</div>
<section class="home-section">
  <nav>
    <div class="sidebar-button">
      <i class='bx bx-menu sidebarBtn'></i>
      <span class="home">Home</span>
    </div>
    <h1> Back Office da FCT NOVA</h1>
    <div class="profile-details" id="auxLogged">
      <img src="../img/logo.png" alt="">
      <span class="admin_name" id="name"></span>
    </div>
  </nav>

  <div class="home-content">
    <div class="form" style="width: 420px; margin-left: 5%;">
      <div class="title">Pessoas na Aplicação</div>
      <div class="input-container ic1">
        <input readonly="readonly" class="input" type="text" placeholder="Número de pessoas online:"/>
      </div>
    </div>
    <br>
    <div class="form" style="width: 420px; margin-left: 5%;">
      <div class="title">Pedidos por Resolver</div>
      <div class="input-container ic1">
        <input readonly="readonly" class="input" type="text" placeholder="Número de reportes não resolvidos:"/>
      </div>
    </div>
  </div>
  <div class="popup" id="popup">
    <h3>Está prestes a fazer logout</h3>
    <p>Tem a certeza?</p>
    <button type="button" onclick="logout()">Sim</button> &ensp;
    <button type="button" onclick="closePopup()">Não</button>
  </div>
</section>

<script src="/js/functions.js"></script>
<script>
      let popup = document.getElementById("popup");

      function openPopup(){
        popup.classList.add("open-popup");
      }

      function closePopup(){
        popup.classList.remove("open-popup");
      }

      let sidebar = document.querySelector(".sidebar");
      let sidebarBtn = document.querySelector(".sidebarBtn");
      sidebarBtn.onclick = function() {
      sidebar.classList.toggle("active");
      if(sidebar.classList.contains("active")){
        sidebarBtn.classList.replace("bx-menu" ,"bx-menu-alt-right");
      }else
        sidebarBtn.classList.replace("bx-menu-alt-right", "bx-menu");
      }

      let mybutton = document.getElementById("myBtn");
      window.onscroll = function() {scrollFunction()};

      function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            mybutton.style.display = "block";
        } else {
            mybutton.style.display = "none";
        }
      }

      function topFunction() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
      }

      var myNodelist = document.getElementsByTagName("LI");
      var i;
      for (i = 0; i < myNodelist.length; i++) {
        var span = document.createElement("SPAN");
        var txt = document.createTextNode("\u00D7");
        span.className = "close";
        span.appendChild(txt);
        myNodelist[i].appendChild(span);
      }

      // Click on a close button to hide the current list item
      var close = document.getElementsByClassName("close");
      var i;
      for (i = 0; i < close.length; i++) {
        close[i].onclick = function() {
          var div = this.parentElement;
          div.remove();
        }
      }

      // Create a new list item when clicking on the "Add" button
      function newElement() {
        var li = document.createElement("li");
        var inputValue = document.getElementById("myInput").value;
        var t = document.createTextNode(inputValue);
        li.appendChild(t);
        if (inputValue === '') {
          alert(li.length);
          alert("Lembrete vazio, e preciso escrever alguma coisa!");
        } else {
          document.getElementById("myUL").appendChild(li);
        }
        document.getElementById("myInput").value = "";

        var span = document.createElement("SPAN");
        var txt = document.createTextNode("\u00D7");
        span.className = "close";
        span.appendChild(txt);
        li.appendChild(span);

        for (i = 0; i < close.length; i++) {
          close[i].onclick = function() {
          var div = this.parentElement;
          div.style.display = "none";
        }
      }
    }

    setInterval(showTime, 1000);
        function showTime() {
        	let time = new Date();
        	let hour = time.getHours();
        	let min = time.getMinutes();
        	let sec = time.getSeconds();

        	min = min < 10 ? "0" + min : min;
        	sec = sec < 10 ? "0" + sec : sec;

        	let currentTime = hour + ":"
        		+ min + ":" + sec;

        	document.getElementById("clock")
        		.innerHTML = currentTime;
        }

        showTime();

        const date = new Date();

        const options = {
          weekday: 'long',
          year: 'numeric',
          month: 'long',
          day: 'numeric',
        };

        document.getElementById("data").innerHTML = date.toLocaleString('pt-PT', options);
</script>

</body>
</html>